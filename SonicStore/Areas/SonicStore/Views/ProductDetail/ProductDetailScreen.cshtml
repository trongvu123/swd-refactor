@model List<Product>
@{
    var product = ViewBag.product as Product;
    var listRelate = ViewBag.listProductRelate as List<Product>;
    var images = product.ProductImages as List<ProductImage>;
    var fancyapps = "fancyapps";
    var storageId = Context.Request.Query["storageId"].ToString();
    string[] address = ViewBag.AddressParts as string[];
    int data=0;
    string popperjs = "@popperjs";
    var user = ViewBag.userSession as User;
}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="vi" xml:lang="vi">

<head>
    <title>
        iPhone 14 128GB chính hãng VNA - Giá tốt - Clickbuy
    </title>
    <style>
        

        .list-products {
            width:230%
            
        }

        .product-comment {
          
            width:102%

        }

     
    </style>
    <title>Chi tiết sản phẩm</title>
    <meta name="google-site-verification" content="K2ytpb2EHZ41w9EVix1nUPGg0ceq1F_VCQf8MC5ODWw" />
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://clickbuy.com.vn/assets/js/jquery.min.js"></script>
    <link href="https://clickbuy.com.vn/assets/js/fancybox/fancybox.css" rel="stylesheet" />
    <link href="~/css/PageDesign/ProductDetailMain.css" rel="stylesheet" />
    <link href="~/css/PageDesign/ProductDetailMain1.css" rel="stylesheet" />
    <link href="~/css/PageDesign/ProductPageDesign.css" rel="stylesheet" />
   <link href="~/css/PageDesign/CartInDetailPage.css" rel="stylesheet" />
   <link href="~/css/PageDesign/QuickOrder.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <style>
        .error {
            color: red;
        }


    </style>
    <!-- Thêm JavaScript của Fancybox -->
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
    @* <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.css" integrity="sha512-nNlU0WK2QfKsuEmdcTwkeh+lhGs6uyOxuUs+n+0oXSYDok5qy0EI0lt01ZynHq6+p/tbgpZ7P+yUb+r71wqdXg==" crossorigin="anonymous" referrerpolicy="no-referrer" /> *@
   @*  <script>
        !function (w, d, t) {
            w.TiktokAnalyticsObject = t; var ttq = w[t] = w[t] || []; ttq.methods = ["page", "track", "identify", "instances", "debug", "on", "off", "once", "ready", "alias", "group", "enableCookie", "disableCookie"], ttq.setAndDefer = function (t, e) { t[e] = function () { t.push([e].concat(Array.prototype.slice.call(arguments, 0))) } }; for (var i = 0; i < ttq.methods.length; i++)ttq.setAndDefer(ttq, ttq.methods[i]); ttq.instance = function (t) { for (var e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++)ttq.setAndDefer(e, ttq.methods[n]); return e }, ttq.load = function (e, n) { var i = "https://analytics.tiktok.com/i18n/pixel/events.js"; ttq._i = ttq._i || {}, ttq._i[e] = [], ttq._i[e]._u = i, ttq._t = ttq._t || {}, ttq._t[e] = +new Date, ttq._o = ttq._o || {}, ttq._o[e] = n || {}; var o = document.createElement("script"); o.type = "text/javascript", o.async = !0, o.src = i + "?sdkid=" + e + "&lib=" + t; var a = document.getElementsByTagName("script")[0]; a.parentNode.insertBefore(o, a) };

            ttq.load('CMV0EVRC77U1PJEFT2D0');
            ttq.page();
        }(window, document, 'ttq');
    </script>

    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
            n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '748140023587304');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
            src="https://www.facebook.com/tr?id=748140023587304&ev=PageView&noscript=1" /></noscript>


    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
            n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '1711312462628843');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
            src="https://www.facebook.com/tr?id=1711312462628843&ev=PageView&noscript=1" /></noscript>


    <meta name="facebook-domain-verification" content="kgv0qh2i3o1tpfewvoky7qq73f6ryo" />

    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-W2X5BG4');</script>


    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-5T5S3TG');</script>


    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-999283561"></script>


    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-971114017"></script> *@
</head>

<body>
    <input name="ctl00$hdnToken" type="hidden" id="hdnToken" value="3uhIAnFanI4IVGyOnlML5d+FdoexwcxxmNeCmTVZixA=" />
   

    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2X5BG4" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>


    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5T5S3TG" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>

    <main class="main site_main ">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css"
            integrity="sha512-rd0qOHVMOcez6pLWPVFIv7EfSdGKLt+eafXh4RO/12Fgr41hDQxfGvoi1Vy55QIVcQEujUE1LQrATCLl2Fs+ag=="
            crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link href="https://clickbuy.com.vn/styles/product?v=N7v3L6-tY3ksh0qjEca8dBQOa5IHc6QPoGW5FiFalMk1" rel="stylesheet" />
        <script>
            var pageCmt = 1, typeid = 159319, type = 'products';
        </script>
        <input type="hidden" name="type_name" value="iPhone 14 128GB VNA - Tặng BH rơi vỡ vào nước" />
        <input type="hidden" name="type_link" value="/apple-iphone-14-128gb-chinh-hang-vna.html" />
        <section class="product-top">
            <div class="container">
                <h1 class="product-name">@product.Name</h1>
                <div class="product-meta">
                    <ul>
                        <li>
                            <svg class xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="rgb(255, 202, 63)"
                                height="14px" width="14px">
                                <path
                                    d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z">
                                </path>
                            </svg>
                        </li>
                        <li>
                            <svg class xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="rgb(255, 202, 63)"
                                height="14px" width="14px">
                                <path
                                    d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z">
                                </path>
                            </svg>
                        </li>
                        <li>
                            <svg class xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="rgb(255, 202, 63)"
                                height="14px" width="14px">
                                <path
                                    d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z">
                                </path>
                            </svg>
                        </li>
                        <li>
                            <svg class xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="rgb(255, 202, 63)"
                                height="14px" width="14px">
                                <path
                                    d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z">
                                </path>
                            </svg>
                        </li>
                        <li>
                            <svg class xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="#d3ced2"
                                height="14px" width="14px">
                                <path
                                    d="M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.6 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z">
                                </path>
                            </svg>
                        </li>
                    </ul>
                    <p>(18 đánh giá)</p>
                </div>
                <div class="row">
                    <div class="col col-xs-5 col-sm-5 col-md-5 col-lg-5">
                        <div class="product-slide">
                            <div class="swiper product-slide__gallery"
                                style="--swiper-navigation-size: 16px; --swiper-theme-color:#fff">
                                <div class="swiper-wrapper">
                                    @for (int i = 0; i < images.Count; i++)
                                    {
                                        <div class="swiper-slide" data-image="@images[i].Image"
                                            data-index="@i" data-fancybox="gallery"
                                            data-src="@images[i].Image">
                                            <img loading="lazy"
                                                src="@images[i].Image"
                                                alt="iPhone 14 128GB VNA - Tặng BH rơi vỡ vào nước-44323"
                                                title="iPhone 14 128GB VNA - Tặng BH rơi vỡ vào nước-44323" />
                                        </div>
                                        
                                    }
                                </div>
                                <div class="swiper-button-next"></div>
                                <div class="swiper-button-prev"></div>
                            </div>
                            <div thumbsslider class="swiper product-slide__thumbnail">
                                <div class="swiper-wrapper">
                                   
                                    @for(int i =0; i< images.Count; i++)
                                    {
                                        <div class="swiper-slide">
                                            <img loading="lazy"
                                                src="@images[i].Image"
                                                alt="iPhone 14 128GB VNA - Tặng BH rơi vỡ vào nước-44323"
                                                title="iPhone 14 128GB VNA - Tặng BH rơi vỡ vào nước-44323" width="150"
                                                height="150">
                                        </div>
                                        
                                    }
                                  
                                </div>
                            </div>
                        </div>
                        <div class="condition">
                            <div class="condition-title">
                                <p>Thông tin sản phẩm</p>
                            </div>
                            <div class="condition-content">
                                <p>Máy mới 100%, nguyên seal hộp, chính hãng Apple Việt Nam. Hộp, Sách hướng dẫn, Cây
                                    lấy sim, Cáp Lightning - Type C</p>
                                <p>
                                </p>
                                <p>
                                    Sonic store là đại lý bán lẻ uỷ quyền iPhone chính hãng VN/A của Apple Việt Nam</p>
                                <p>
                                </p>
                                <p>
                                    Bao test 1 ĐỔI 1 trong 30 ngày nếu có lỗi phần cứng nhà sản xuất. Bảo hành 12 tháng
                                    tại trung tâm bảo hành chính hãng Apple.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                        <div class="flex product-price-container">
                            <div class="product-price text-right">
                                @if (!string.IsNullOrEmpty(storageId))
                                {
                                    foreach (var item in product.Storages)
                                    {
                                        if(item.Id == int.Parse(storageId))
                                        {
                                            <p class="price-old js-format-price" data-price="@item.OriginalPrice">&nbsp;</p>
                                            <p class="price js-format-price" data-price="@item.SalePrice">&nbsp;</p>
                                             data = item.Id;
                                            break;
                                        }
                                    }
                                }
                                else
                                {
                                    foreach (var item in product.Storages)
                                    {
                                        <p class="price-old js-format-price" data-price="@item.OriginalPrice">&nbsp;</p>
                                        <p class="price js-format-price" data-price="@item.SalePrice">&nbsp;</p>
                                         data = item.Id;
                                        break;
                                    }
                                }
                            </div>
                            <div class="product-installment text-right">
                                <span>Trả góp 0%</span>
                                <p>
                                    Trả góp chỉ từ <b>0đ</b>
                                </p>
                            </div>
                        </div>
                        <p class="list-title">Phiên bản khác</p>
                        <div class="related_versions list">
                            @if (!string.IsNullOrEmpty(storageId))
                            {
                                foreach (var item in product.Storages)
                                {
                                    <div class="related_versions__item list-item @(item.Id==int.Parse(storageId) ? "active" : "") ">
                                        <a asp-controller="ProductDetail" asp-action="ProductDetailScreen" asp-route-storageId="@item.Id" aria-label="@(item.Storage_capacity)GB" title="@(item.Storage_capacity)GB">
                                            <p>@(item.Storage_capacity)GB</p>
                                            <span class="js-format-price" data-price="@item.SalePrice">&nbsp;</span>
                                        </a>
                                    </div>
                                }
                            }
                            else
                            {
                                bool flag = false;
                                foreach(var item in product.Storages)
                                {
                                    <div class="related_versions__item list-item @(!flag ? "active" : "") ">
                                        <a asp-controller="ProductDetail" asp-action="ProductDetailScreen" asp-route-storageId="@item.Id" aria-label="@(item.Storage_capacity)GB" title="@(item.Storage_capacity)GB">
                                            <p>@(item.Storage_capacity)GB</p>
                                            <span class="js-format-price" data-price="@item.SalePrice">&nbsp;</span>
                                        </a>
                                    </div>
                                    flag = true;
                                }
                            }
             
                        </div>
                        <div class="gift">
                            <div class="gift-title">
                                <p>
                                    <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">
                                        <path d="M32 448c0 17.7 14.3 32 32 32h160V320H32v128zm256 32h160c17.7 0 32-14.3 32-32V320H288v160zm192-320h-42.1c6.2-12.1 10.1-25.5 10.1-40 0-48.5-39.5-88-88-88-41.6 0-68.5 21.3-103 68.3-34.5-47-61.4-68.3-103-68.3-48.5 0-88 39.5-88 88 0 14.5 3.8 27.9 10.1 40H32c-17.7 0-32 14.3-32 32v80c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-80c0-17.7-14.3-32-32-32zm-326.1 0c-22.1 0-40-17.9-40-40s17.9-40 40-40c19.9 0 34.6 3.3 86.1 80h-86.1zm206.1 0h-86.1c51.4-76.5 65.7-80 86.1-80 22.1 0 40 17.9 40 40s-17.9 40-40 40z"></path>
                                    </svg>
                                    Khuyến mãi
                                </p>
                            </div>
                            <div class="gift-content">
                                <p><span style="color:#003300">Trả góp 0% lãi - 0 phụ phí - Trả trước 0 đồng kỳ hạn 3-6 tháng </span><em><span style="color:#003300">(</span><a href="https://clickbuy.com.vn/chuong-trinh-tra-gop-3-khong-danh-cho-khach-hang-mua-san-pham-apple" previewlistener="true"><span style="color:#003300">chi tiết</span></a><span style="color:#003300">)</span></em></p>
                                <p><span style="color:#003300">Tặng gói bảo hành Rơi vỡ - Vào nước</span></p>
                                <p><span style="color:#003300">Hỗ trợ chuyển đổi Esim miễn phí ngay tại shop</span></p>
                                <p><span style="color:#003300">Thu cũ - Đổi mới trợ giá lên đến </span><span style="color:#e74c3c"><strong>1.000.000đ</strong></span></p>
                                <p><span style="color:#003300">Tặng sạc Anker/ Innostyle 20W chính hãng khi gia hạn bảo hành 24 tháng</span></p>
                                <p><span style="color:#003300">Giảm ngay 10% khi mua phụ kiện khi nâng cấp bảo hành vàng</span></p>
                                <p><span style="color:#003300">Ưu đãi mua Combo phụ kiện giá cực sốc tiết kiệm đến </span><span style="color:#e74c3c"><strong>300.000đ</strong></span></p>
                                <p><span style="color:#003300">Giảm thêm </span><span style="color:#e74c3c"><strong>100.000đ</strong> </span><span style="color:#003300">khi mua kèm iPad/Apple Watch</span></p>
                            </div>
                            <input type="hidden" name="product_gifs" value="Trả góp 0% lãi - 0 phụ phí - Trả trước 0 đồng kỳ hạn 3-6 tháng (chi tiết)

Tặng gói bảo hành Rơi vỡ - Vào nước

Hỗ trợ chuyển đổi Esim miễn phí ngay tại shop

Thu cũ - Đổi mới trợ giá lên đến 1.000.000đ

Tặng sạc Anker/ Innostyle 20W chính hãng khi gia hạn bảo hành 24 tháng

Giảm ngay 10% khi mua phụ kiện khi nâng cấp bảo hành vàng

Ưu đãi mua Combo phụ kiện giá cực sốc tiết kiệm đến 300.000đ

Giảm thêm 100.000đ khi mua kèm iPad/Apple Watch" autocomplete="off">
                        </div>
                        <div class="product-action">
      
                            <input type="hidden" name="product_name"
                                value="iPhone 14 128GB VNA - Tặng BH rơi vỡ vào nước" autocomplete="off">
                            <input type="hidden" name="variant_name" value autocomplete="off">
                            <a data-fancybox data-src="#hidden-content" href="javascript:;">

                                    <p class="add-to-cart buy-now">
                                        Mua ngay <span>( giao tận nhà)</span>
                                    </p>
                                </a>
                            <p class="add-to-cart" data-id="@data" style="background-color:rgb(255, 66, 78); display:flex; justify-content:center">
                                <span style="margin-right:10px">
                                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" x="0" y="0" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M164.96 300.004h.024c.02 0 .04-.004.059-.004H437a15.003 15.003 0 0 0 14.422-10.879l60-210a15.003 15.003 0 0 0-2.445-13.152A15.006 15.006 0 0 0 497 60H130.367l-10.722-48.254A15.003 15.003 0 0 0 105 0H15C6.715 0 0 6.715 0 15s6.715 15 15 15h77.969c1.898 8.55 51.312 230.918 54.156 243.71C131.184 280.64 120 296.536 120 315c0 24.812 20.188 45 45 45h272c8.285 0 15-6.715 15-15s-6.715-15-15-15H165c-8.27 0-15-6.73-15-15 0-8.258 6.707-14.977 14.96-14.996zM477.114 90l-51.43 180H177.032l-40-180zM150 405c0 24.813 20.188 45 45 45s45-20.188 45-45-20.188-45-45-45-45 20.188-45 45zm45-15c8.27 0 15 6.73 15 15s-6.73 15-15 15-15-6.73-15-15 6.73-15 15-15zM362 405c0 24.813 20.188 45 45 45s45-20.188 45-45-20.188-45-45-45-45 20.188-45 45zm45-15c8.27 0 15 6.73 15 15s-6.73 15-15 15-15-6.73-15-15 6.73-15 15-15zm0 0" fill="#fff" opacity="1" data-original="#000000" class=""></path></g></svg>
                                </span>
                                 Thêm giỏ hàng 
                            </p>
   
                        </div>
                        <div id="load-endow">
                        </div>
                    </div>

                    <div class="col col-xs-3 col-sm-3 col-md-3 col-lg-3">
                        <div class="list-products" style="width: 163%;flex-direction:column">
                            @foreach(var item in Model)
                            {
                               foreach(var s in item.Storages)
                                {
                                    <div class="list-products__item" data-id="138922" style="">
                                        <a asp-controller="ProductDetail" asp-action="ProductDetailScreen" asp-route-id="@item.Id" aria-label="iPhone 13 128GB chính hãng VN/A - Tặng BH rơi vỡ vào nước" title="@item.Name">
                                            <div class="thumbnail">
                                                <img class="lazyload" loading="lazy" src=@item.Image alt="iPhone 13 128GB chính hãng VN/A - Tặng BH rơi vỡ vào nước" width="150" height="150">
                                            </div>
                                            <div class="detail">
                                                <h3 class="title_name" style="font-weight:700; font-size:13.5px">@item.Name</h3>
                                                <div class="ex_pricesale percent d-none" data-price="@s.SalePrice" data-price1="@s.OriginalPrice">&nbsp;</div>
                                                <div class="price mb-12">
                                                    <ins class="new-price js-format-price" data-price="@s.SalePrice">&nbsp;</ins>
                                                    <del class="old-price js-format-price" data-price="@s.OriginalPrice">&nbsp;</del>
                                                </div>
                                                <div class="extra_tick">
                                                    <label class="installment">Trả góp 0%</label>
                                                    <label class="freeship">Miễn phí ship</label>
                                                </div>
                                                <div class="block-rate_product">
                                                    <div class="block-rate__star">
                                                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512">
                                                            <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"></path>
                                                        </svg>
                                                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512">
                                                            <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"></path>
                                                        </svg>
                                                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512">
                                                            <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"></path>
                                                        </svg>
                                                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512">
                                                            <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"></path>
                                                        </svg>
                                                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512">
                                                            <path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"></path>
                                                        </svg>
                                                    </div>
                                                    <div class="rate_title">
                                                        (268 đánh giá)
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    break;
                                }
                            }
                        </div>
  
                    </div>
                </div>
            </div>
        </section>
        <div class="bottom">
            <div class="container">
                <div class="row">
                    <div class="col col-xs-8 col-sm-8 col-md-8 col-lg-8" style="margin-bottom:50px">
                        <div class="product-content">
                            <div class="css-content">
                               @Html.Raw(product.Detail)
                            </div>
                            <div class="product-content__show">
                                <p class="show">Xem thêm</p>
                                <p class="hide">Ẩn bớt</p>
                            </div>
                        </div>
                    </div>
                    <div class="col col-xs-4 col-sm-4 col-md-4 col-lg-4">
                        <div class="product-specification">
                            <div class="product-specification__title">
                                <p>Thông số kỹ thuật @product.Name</p>
                            </div>
                            <div class="product-specification__thumb">
                                <img src="@product.Image"
                                    alt="iPhone 14 128GB VNA - Tặng BH rơi vỡ vào nước" />
                            </div>
                            <div class="product-specification__show">
                                <p class="show">
                                    Xem chi tiết
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="10"
                                        height="10">
                                        <path
                                            d="M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z">
                                        </path>
                                    </svg>
                                </p>
                                <p class="hide">
                                    Ẩn bớt
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="10"
                                        height="10">
                                        <path
                                            d="M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z">
                                        </path>
                                    </svg>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://clickbuy.com.vn/assets/js/comments.js?v=4"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"
            integrity="sha512-Ysw1DcK1P+uYLqprEAzNQJP+J4hTx4t/3X2nbVwszao8wD+9afLjBQYjz7Uk4ADP+Er++mJoScI42ueGtQOzEA=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <script>

            var swiper = new Swiper(".product-slide__thumbnail", {
                slidesPerView: 'auto',
                spaceBetween: 10,
                freeMode: !0,
                watchSlidesVisibility: !0,
                watchSlidesProgress: !0
            });
            var swiper2 = new Swiper(".product-slide__gallery", {
                spaceBetween: 10,
                crossFade: !0,
                effect: 'fade',
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                thumbs: {
                    swiper: swiper,
                },
            });

            $(document).ready(function () {

                Fancybox.bind("[data-fancybox='gallery']", {
                    Hash: false,
                    Thumbs: {
                        type: "classic",
                    }
                });

                Fancybox.bind("[data-fancybox='showmap']", {
                    Hash: false,
                    Thumbs: {
                        type: "classic",
                    }
                });

                var slideGalleryHeight = $(".product-slide__gallery").height();
                $('.product-slide__gallery .item-feature').css("height", slideGalleryHeight);
            })

        </script>
        <script>
            document.addEventListener("DOMContentLoaded", function (event) {
                $(document).ready(function () {

                    if ($(".product-content").height() < 200) {
                        $(".product-content").hide()
                    }

                    $('body').on('click', '.submit_call', function () {
                        var phone = $('.phone').val();
                        var capcha = $('#hdnToken').val();
                        var type_name = $('input[name="type_name"]').val();
                        var type_link = $('input[name="type_link"]').val();
                        var vnf_regex = /((09|03|07|08|05)+([0-9]{8})\b)/g;
                        if (phone !== '') {
                            if (vnf_regex.test(phone) == false) {
                                alert_show(type = 'error', 'Số điện thoại của bạn không đúng định dạng!');
                                $('.phone').val('');
                            } else {
                                $.ajax({
                                    headers: {
                                        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                                    },
                                    dataType: 'json', type: 'POST',
                                    data: {
                                        capcha: capcha,
                                        phone: phone,
                                        type_name: type_name,
                                        type_link: type_link,
                                    },
                                    url: '/ajax/callmeback',
                                    method: "POST",
                                    beforeSend: function () {
                                        loadingBox('open')
                                    },
                                    success: function () {
                                        alert_show(type = 'success', 'Thành công! Chúng tôi sẽ gọi lại cho bạn!');
                                        setTimeout(function () {
                                            loadingBox('close')
                                        }, 1000)
                                    },
                                    error: function () {
                                        alert_show(type = 'error', 'Có lỗi xảy ra!');
                                        setTimeout(function () {
                                            loadingBox('close')
                                        }, 1000)
                                    }
                                })
                                $('.phone').val('');
                            }
                        } else {
                            alert_show(type = 'error', 'Bạn chưa điền số điện thoại!');
                        }
                    });

                    $('.product-content__show p').on('click', function () {
                        if ($(this).hasClass('show')) {
                            $(this).parents('.product-content').addClass('show');
                        } else {
                            $(this).parents('.product-content').removeClass('show');
                        }
                    });

                    $('.product-specification__show p').on('click', function () {
                        if ($(this).hasClass('show')) {
                            $(this).parents('.product-specification').addClass('show');
                        } else {
                            $(this).parents('.product-specification').removeClass('show');
                        }
                    });

                    $('.list-related__header ul li').on('click', function () {
                        var id = $(this).data('id');
                        $('.list-related__header ul li').removeClass('active')
                        $(this).addClass('active')
                        $('.list-related__content .list-products').removeClass('show')
                        $('.list-related__content #' + id).addClass('show')
                    });

                    $('body').on('click', '.variant-select__title', function () {
                        $(this).parents('.variant-select').addClass('active')
                        $('.fixed').addClass('active')
                    });

                    $(document).mouseup(function (e) {
                        var container = $(".variant-select__list");

                        if (!container.is(e.target) && container.has(e.target).length === 0) {
                            container.parents('.variant-select').removeClass('active');
                            $('.fixed').removeClass('active');
                        }

                    });


                })

                // $(document).ready(function () {

  

                //     function getInforVariant() {

                //         let attr1_id = $(".list-variant.key_1").find("p.active").data('id');
                //         let attr1 = $(".list-variant.key_1").find("p.active").data('name');
                //         let image = $(".list-variant.key_1").find("p.active").data('image');
                //         let attr2 = $(".list-variant.key_2").find("p.active").data('name');
                //         let attr3 = $(".list-variant.key_3").find("p.active").data('name');
                //         let attr4 = $(".list-variant.key_4").find("p.active").data('name');

                //         listFilter = listVariant;

                //         if (attr1) {
                //             listFilter = listFilter.filter(item => item.attribute_name_1 == attr1);
                //             $('.product-action input[name="attribute_id"]').val(attr1_id);
                //         }

                //         if (attr2) {
                //             listFilter = listFilter.filter(item => item.attribute_name_2 == attr2);
                //         }
                //         if (attr3) {
                //             listFilter = listFilter.filter(item => item.attribute_name_3 == attr3);
                //         }
                //         if (attr4) {
                //             listFilter = listFilter.filter(item => item.attribute_name_4 == attr4);
                //         }
                //         if (listFilter[0].price_old) {
                //             $(".product-price .price-old").text((parseInt(price_old)).toLocaleString() + ' đ');
                //         }
                //         if (listFilter.length > 0) {

                //             var totalPrice = parseInt(price) + parseInt(listFilter[0].price) + (price_locations[listFilter[0].attribute_id_1] || 0);
                //             var formattedPrice = totalPrice.toLocaleString() + ' đ';
                //             var result = (totalPrice === 0) ? "Liên hệ" : formattedPrice;

                //             $(".product-price .price").text(result);

                //             if (image != '') {
                //                 listFilter[0].image = image;
                //             }

                //             $('.product-action input[name="variant_id"]').val(parseInt(listFilter[0].id));
                //             $('.product-action input[name="product_price"]').val(parseInt(price + listFilter[0].price) + (price_locations[listFilter[0].attribute_id_1] || 0));
                //             $('.product-action input[name="variant_name"]').val(listFilter[0].variant_name);

                //             let link_installment_card = `/tra-gop/?&product_id=159319` + `&variant_id=` + parseInt(listFilter[0].id);


                //             let link_installment_bank = `/tra-gop-the-tin-dung/?t=1&product_id=159319` + `&variant_id=` + parseInt(listFilter[0].id);
                //             $('.product-action .installment-online').attr('href', link_installment_bank)


                //             $('.product-action .installment-card').attr('href', link_installment_card)

                //         }
                //         $(".list-variant p.active").find("input[type='radio']").prop('checked', true);
                //     }
                //     function displayAttr2() {
                //         if (!$('.list-variant.key_2 p').length) return
                //         $("body .list-variant.key_2 p").removeClass("active").parent().removeClass("active");
                //         $("body .list-variant.key_2 p").parent().css("display", "none").removeClass('check');
                //         let text_attr1 = $(".list-variant.key_1").find("p.active").data('name');
                //         let listFilter = listVariant;

                //         if (text_attr1) {
                //             listFilter = listFilter.filter(item => item.attribute_name_1 == text_attr1);
                //         }
                //         if (listFilter.length > 0) {
                //             listFilter.forEach(function (element) {
                //                 if (element.status == 1) {
                //                     $('.list-variant.key_2 p').each(function () {
                //                         let v = $(this).data('name');
                //                         if (v == element.attribute_name_2) {
                //                             $(this).parent().css("display", "inline-block").addClass('check');
                //                         }
                //                     });
                //                 }
                //             });
                //             if (listFilter[0].attribute_name_2) {
                //                 $(".list-variant.key_2 div.check:first").addClass('active').find('p').addClass('active');
                //             }
                //             $('.product-action input[name="variant_id"]').val(parseInt(listFilter[0].id));
                //         }
                //     }
                //     function displayAttr3() {

                //         if (!$('.list-variant.key_3 p').length) return
                //         $('.list-variant.key_3 p').removeClass('active').parent().removeClass("active");
                //         $(".list-variant.key_3 p").parent().css("display", "none").removeClass('check');
                //         let text_attr1 = $(".list-variant.key_1").find("p.active").data('name')
                //         let text_attr2 = $(".list-variant.key_2").find("p.active").data('name')
                //         let listFilter = listVariant;
                //         if (text_attr2) {
                //             listFilter = listFilter.filter(item => item.attribute_name_2 == text_attr2);
                //         }
                //         if (text_attr1) {
                //             listFilter = listFilter.filter(item => item.attribute_name_1 == text_attr1);
                //         }
                //         if (listFilter.length > 0) {
                //             listFilter.forEach(function (element) {
                //                 if (element.status == 1) {
                //                     $('.list-variant.key_3 p').each(function () {
                //                         let v = $(this).data('name')
                //                         if (v == element.attribute_name_3) {
                //                             $(this).parent().css("display", "inline-block").addClass('check');
                //                         }
                //                     });
                //                 }
                //             });
                //             if (listFilter[0].attribute_name_3) {
                //                 $(".list-variant.key_3 div.check:first").addClass('active').find('p').addClass('active');
                //             }
                //             $('.product-action input[name="variant_id"]').val(parseInt(listFilter[0].id));
                //         }
                //     }
                //     function displayAttr4() {
                //         if (!$('.list-variant.key_4 p').length) return
                //         $('.list-variant.key_4 p').removeClass('active').parent().removeClass("active");
                //         $(".list-variant.key_4 p").parent().css("display", "none").removeClass('check');
                //         let text_attr1 = $(".list-variant.key_1").find("p.active").data('name')
                //         let text_attr2 = $(".list-variant.key_2").find("p.active").data('name')
                //         let text_attr3 = $(".list-variant.key_3").find("p.active").data('name')
                //         let listFilter = listVariant;
                //         if (text_attr2) {
                //             listFilter = listFilter.filter(item => item.attribute_name_2 == text_attr2);
                //         }
                //         if (text_attr3) {
                //             listFilter = listFilter.filter(item => item.attribute_name_3 == text_attr3);
                //         }
                //         if (text_attr1) {
                //             listFilter = listFilter.filter(item => item.attribute_name_1 == text_attr1);
                //         }
                //         if (listFilter.length > 0) {
                //             listFilter.forEach(function (element) {
                //                 if (element.status == 1) {
                //                     $('.list-variant.key_4 p').each(function () {
                //                         let v = $(this).data('name')
                //                         if (v == element.attribute_name_4) {
                //                             $(this).parent().css("display", "inline-block").addClass('check');
                //                         }
                //                     });
                //                 }
                //             });
                //             if (listFilter[0].attribute_name_3) {
                //                 $(".list-variant.key_4 div.check:first").addClass('active').find('p').addClass('active');
                //             }
                //             $('.product-action input[name="variant_id"]').val(parseInt(listFilter[0].id));
                //         }
                //     }


                //     if (Object.keys(listVariant).length) {
                //         $('.list-variant.key_1 .list-variant__item:first').addClass('active').find('p').addClass('active');
                //         displayAttr2();
                //         displayAttr3();
                //         displayAttr4();
                //         getInforVariant();
                //     }

                    $('.list-variant.key_1 p').on('click', function (e) {

                        $('.list-variant.key_1 p').removeClass('active').parent().removeClass("active");
                        $(this).addClass('active').parent().addClass("active");

                        getInforVariant();

                        let image = $(".list-variant.key_1").find("p.active").data('image')
                        var slideIndex = $('.product-slide__gallery .swiper-slide[data-image="' + image + '"]').data("index")
                        swiper2.slideTo(slideIndex, 500, true);

                    });

                    $('.list-variant.key_2 p').on('click', function (e) {
                        $('.list-variant.key_2 p').removeClass('active').parent().removeClass("active");
                        $(this).addClass('active').parent().addClass("active");
                        getInforVariant();
                    });

                    $('.list-variant.key_3 p').on('click', function (e) {
                        $('.list-variant.key_3 p').removeClass('active').parent().removeClass("active");
                        $(this).addClass('active').parent().addClass("active");
                        getInforVariant();
                    });
                    $('.list-variant.key_4 p').on('click', function (e) {
                        $('.list-variant.key_4 p').removeClass('active').parent().removeClass("active");
                        $(this).addClass('active').parent().addClass("active");
                        getInforVariant();
                    });

                //     var url = window.location.href
                //     var attribute = getUrlParameter(url, "attribute_pa_mau-sac")
                //     if (attribute) {
                //         $('.list-variant.key_1 p').removeClass('active').parent().removeClass("active");
                //         $('.list-variant.key_1 p[data-id="' + attribute + '"]').addClass('active').parent().addClass("active");
                //         getInforVariant();
                //     }

                // });

                try {
                    // Sự kiện này đo lường thời điểm người dùng truy cập trang sản phẩm
                    setTimeout(function () {

                        let product_price = $('.product-action').find('input[name="product_price"]').val();
                        let product_id = $('.product-action').find('input[name="product_id"]').val();

                        dataLayer.push({
                            event: 'view_item',
                            'value': '' + product_price + '',
                            'items': [
                                {
                                    'id': '' + product_id + '',
                                    'google_business_vertical': 'retail'
                                }
                            ],
                            'items_Criteo': '' + product_id + ''
                        });

                    }, 5000)
                } catch (err) {
                    console.log(err)
                }



                setTimeout(() => commentLoad('products', 159319, pageCmt, 'comments-list'), 1000);

                $(".btn-load-comment").on("click", function () {
                    pageCmt += 1;

                    const $commentsLoading = $(".comments-loading");
                    $commentsLoading.css({ visibility: "visible", opacity: 0.0 }).animate({ opacity: 1.0 }, 200);

                    commentLoad('products', 159319, pageCmt, 'comments-list');
                });

            });

            function commentLoad(type, type_id, pageCmt, container) {
                const ajaxUrl = `/ajaxs/comment.aspx?id=${type_id}&type=${type}&page=${pageCmt}`;
                $.get(ajaxUrl, function (data) {
                    const $container = $("." + container);
                    const $loadCommentButton = $(".btn-load-comment");
                    const $commentsLoading = $(".comments-loading");

                    if (data !== '') {
                        $container.append(data);
                        $loadCommentButton.removeClass("d-none");
                    } else {
                        if (pageCmt === 1) {
                            $container.append("<p class='no-comments'>Hãy để lại bình luận của bạn tại đây!</p>");
                        }
                        $loadCommentButton.addClass("d-none");
                    }

                    $commentsLoading.animate({ opacity: 0.0 }, 200, function () {
                        $commentsLoading.css("visibility", "hidden");
                    });

                    $(".item-action__time span").each(function () {
                        var time = $(this).attr("data-time");
                        $(this).html(getTimeAgo(time))
                    });

                });
            }

        </script>
        <script>
            $(document).ready(function () {
                $('#load-area').load("/blocks/area.aspx", function () {
                    $('.area-select select').on('change', function () {
                        let id = $(this).val()
                        $('.area-list').removeClass('show')
                        $('#area-list-' + id).addClass('show')
                    });
                })
                $('#load-policy').load("/blocks/propolicy.aspx?id=159319");
                $('#load-endow').load("/blocks/proendow.aspx?id=159319");
                $('.gift-content').load("/blocks/progift.aspx?id=159319");
            });
        </script>
    </main>

    <section id="loading_box">
        <div id="loading_image"></div>
    </section>
    <div id="toast-container" class="toast-top-right">
        <div class="toast" aria-live="assertive">
            <div class="toast-message">
                <p></p>
            </div>
        </div>
    </div>
    <div style="display: none; width: 1024px; height: 900px; overflow:auto" id="hidden-content">

<body >

    <section class="product-top">
        <div class="quick-order" style="padding:0 15px;">
            <div class="row">
                <div class="col col-sm-5">
                    <div class="product-slide">
                        <img src="@product.Image" />
                    </div>
                    <h1 class="product-name">@product.Name - Tặng BH rơi vỡ vào nước <span class="product-name-variant"></span></h1>
                    <div class="product-price">
                                @if (!string.IsNullOrEmpty(storageId))
                                {
                                    foreach (var item in product.Storages)
                                    {
                                        if (item.Id == int.Parse(storageId))
                                        {
                                            <p class="price js-format-price" data-price="@item.SalePrice">&nbsp;</p>

                                            break;
                                        }
                                    }
                                }
                                else
                                {
                                    foreach(var item in product.Storages)
                                    {
                                        <p class="price js-format-price" data-price="@item.SalePrice">&nbsp;</p>
                                        break;
                                    }
                                    
                                }
                    </div>
                    <div class="gift">
                        <div class="gift-title">
                            <p>
                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">
                                    <path d="M32 448c0 17.7 14.3 32 32 32h160V320H32v128zm256 32h160c17.7 0 32-14.3 32-32V320H288v160zm192-320h-42.1c6.2-12.1 10.1-25.5 10.1-40 0-48.5-39.5-88-88-88-41.6 0-68.5 21.3-103 68.3-34.5-47-61.4-68.3-103-68.3-48.5 0-88 39.5-88 88 0 14.5 3.8 27.9 10.1 40H32c-17.7 0-32 14.3-32 32v80c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-80c0-17.7-14.3-32-32-32zm-326.1 0c-22.1 0-40-17.9-40-40s17.9-40 40-40c19.9 0 34.6 3.3 86.1 80h-86.1zm206.1 0h-86.1c51.4-76.5 65.7-80 86.1-80 22.1 0 40 17.9 40 40s-17.9 40-40 40z" />
                                </svg>
                                Khuyến mãi
                            </p>
                        </div>
                        <div class="gift-content">
                            <p><span style="color:#003300">Trả g&oacute;p 0% l&atilde;i - 0 phụ ph&iacute; - Trả trước 0 đồng kỳ hạn 3-6 th&aacute;ng </span><em><span style="color:#003300">(</span><a href="https://clickbuy.com.vn/chuong-trinh-tra-gop-3-khong-danh-cho-khach-hang-mua-san-pham-apple" previewlistener="true"><span style="color:#003300">chi tiết</span></a><span style="color:#003300">)</span></em></p>
                            <p><span style="color:#003300">Tặng g&oacute;i bảo h&agrave;nh Rơi vỡ - V&agrave;o nước</span></p>
                            <p><span style="color:#003300">Hỗ trợ chuyển đổi Esim miễn ph&iacute; ngay tại shop</span></p>
                            <p><span style="color:#003300">Thu cũ - Đổi mới trợ gi&aacute; l&ecirc;n đến </span><span style="color:#e74c3c"><strong>1.000.000đ</strong></span></p>
                            <p><span style="color:#003300">Tặng sạc Anker/ Innostyle 20W ch&iacute;nh h&atilde;ng khi gia hạn bảo h&agrave;nh 24 th&aacute;ng</span></p>
                            <p><span style="color:#003300">Giảm ngay 10% khi mua phụ kiện khi n&acirc;ng cấp bảo h&agrave;nh v&agrave;ng</span></p>
                            <p><span style="color:#003300">Ưu đ&atilde;i mua Combo phụ kiện gi&aacute; cực sốc tiết kiệm đến </span><span style="color:#e74c3c"><strong>300.000đ</strong></span></p>
                            <p><span style="color:#003300">Giảm th&ecirc;m </span><span style="color:#e74c3c"><strong>100.000đ</strong> </span><span style="color:#003300">khi mua k&egrave;m iPad/Apple Watch</span></p>
                        </div>
                    </div>
                </div>
                <div class="col col-sm-7">
                    <h2 class="mb-10">Đặt hàng sản phẩm</h2>

                    <div class="variant" data-product_id="197367">
                        <span class="list-title">Bộ nhớ trong:</span>
                        <div class="list-variant list key_1" data-id="1">
                                    @if (!string.IsNullOrEmpty(storageId))
                                    {
                                        foreach (var item in product.Storages)
                                        {
                                                <div class="list-variant__item list-item list-item @(item.Id==int.Parse(storageId) ? "active" : "") " data-id="@item.Id" style="text-align:center">
                                                    <a  aria-label="@(item.Storage_capacity)GB" title="@(item.Storage_capacity)GB">
                                                        <p>@(item.Storage_capacity)GB</p>
                                                        <span class="js-format-price" data-price="@item.SalePrice">&nbsp;</span>
                                                    </a>
                                            </div>
                                        }
                                    }
                                    else
                                    {
                                        bool flag1 = false;
                                        foreach(var item in product.Storages)
                                        {
                                            <div class="list-variant__item list-item list-item @(!flag1 ? "active" : "") " data-id="@item.Id" style="text-align:center">
                                                <a aria-label="@(item.Storage_capacity)GB" title="@(item.Storage_capacity)GB">
                                                    <p>@(item.Storage_capacity)GB</p>
                                                    <span class="js-format-price" data-price="@item.SalePrice">&nbsp;</span>
                                                </a>
                                            </div>
                                            flag1 = true;
                                        }
                                    }
                        </div>
                        <input type="hidden" id="inp-storageId" value=""/>
                    </div>
                    <div class="cart-area__content">
                        <div class="info">
                            <form id="QuickOrderForm">

                                <h3 class="title">Thông tin khách hàng</h3>
                                <div class="payment-customer flex address-default" id="address-default">
                                    <div class="form-row mb-12 flex row-name">
                                        <input type="text" class="form-control" id="name-validation" name="name" value="@user.FullName" readonly placeholder="Họ và tên*" />
                                    </div>
                                    <div class="form-row mb-12 flex row-phone">
                                        <input type="tel" class="form-control" id="phone-validation" name="phone" value="@user.Phone" readonly placeholder="Điện thoại*" />
                                    </div>
                                    <div class="form-row mb-12 flex">
                                        <input type="email" class="form-control" id="email-validation" name="email" value="@user.Email" readonly placeholder="Email" />
                                    </div>
                                </div>
                                <h3 class="title">Chọn cách thức nhận hàng</h3>
                                <div class="method">
                                    <ul class="method__list">
                                        <li class="method__list--item">
                                            <input type="radio" class="input-radio" id="ReceiveTypeID1" name="ReceiveTypeID" value="1" checked="checked" />
                                            <label for="ReceiveTypeID1">Giao tận nơi</label>
                                        </li>
                                        <li class="method__list--item">
                                            <input type="radio" class="input-radio" id="ReceiveTypeID2" name="ReceiveTypeID" value="2" />
                                            <label for="ReceiveTypeID2">Thanh toán trực tuyến<label>
                                        </li>
                                    </ul>
                                    <div class="receive_box_container">
                                        <div class="receive_box receive_method_cod">
                                            <h4 class="title">Thông tin nhận hàng</h4>
                                            <div class="form-row mb-12 flex row-select">
                                                        <select class="form-control" name="city_id" id="city_id">
                                                    <option value="0">Tỉnh/ thành phố (*)</option>
                                                    
                                                </select>
                                               <input type="hidden" id="tinh" name="tinh" value="" />
                                            </div>
                                                    <div class="form-row mb-12 flex row-select">
                                                        <select class="form-control" name="province_id" id="province_id">
                                                            <option value="0">Quận/ huyện (*)</option>
                                                  
                                                        </select>
                                                        <input type="hidden" id="huyen" name="huyen" value="" />
                                                    </div>
                                                    <div class="form-row mb-12 flex row-select">
                                                        <select class="form-control" name="commune_id" id="commune_id">
                                                            <option value="0">Xã/ phường (*)</option>
                                                         
                                                        </select>
                                                        <input type="hidden" id="xa" name="xa" value="" />
                                                    </div>
              
                                        </div>
                                        <div class="receive_box receive_method_bacs" style="display: none;">
                                            <h4 class="title">Chọn cửa hàng</h4>
                                            <div class="form-row mb-12 flex">
                                                <select id="MKSystemCityID" class="form-control" name="MKSystemCityID" placeholder="Khu Vực *">
                                                    <option value="">Khu vực</option>
                                                    <option value="1">Miền Bắc</option>
                                                    <option value="2">Miền Trung</option>
                                                    <option value="3">Miền Nam</option>
                                                </select>
                                                <p class="err_show null">Địa chỉ không được để trống</p>
                                            </div>
                                            <div class="form-row mb-12 flex">
                                                <select id="store_id" class="form-control" name="store_id" placeholder="Cửa hàng *">
                                                    <option data-region="0" value="0">Cửa hàng *</option>
                                                    <option data-region="3" value="22">290A Xô Viết Nghệ Tĩnh, Phường 25, Bình Thạnh, Tp HCM - Ngã Tư Hàng Xanh</option>
                                                    <option data-region="1" value="7">367 Cầu Giấy, Hà Nội:</option>
                                                    <option data-region="3" value="1">379 Hoàng Văn Thụ, P2, Q.Tân Bình, HCM</option>
                                                    <option data-region="1" value="8">111 Trần Đăng Ninh, Cầu Giấy, Hà Nội:</option>
                                                    <option data-region="3" value="2">42 Trần Quang Khải , Tân Định , Quận 1, HCM</option>
                                                    <option data-region="1" value="10">118 Thái hà, Đống Đa, Hà Nội:</option>
                                                    <option data-region="3" value="3">499 Nguyễn Thị Thập, Q.7, HCM</option>
                                                    <option data-region="1" value="12">312 Nguyễn Trãi, P.Trung Văn, Q.Nam Từ Liêm, Hà Nội (gần Đại Học Hà Nội)</option>
                                                    <option data-region="3" value="4">466 Quang Trung, P.10, Q.Gò Vấp, HCM</option>
                                                    <option data-region="1" value="9">446 Xã Đàn, Đống Đa, Hà Nội:</option>
                                                    <option data-region="1" value="6">380 Trần Phú, Ba Đình, TP.Thanh Hóa:</option>
                                                    <option data-region="3" value="17">269B Hậu Giang, P5, Q.6, HCM</option>
                                                    <option data-region="1" value="13">Ngã 3 Đông Yên, Yên Phong, Bắc Ninh (Khu công nghiệp Yên Phong)</option>
                                                    <option data-region="3" value="18">535 Lê Hồng Phong, Q.10, HCM</option>
                                                    <option data-region="3" value="19">98 Võ Văn Ngân, TP.Thủ Đức, HCM</option>
                                                    <option data-region="1" value="14">269 Nguyễn Hữu Tiến, TT Đồng Văn, Duy Tiên, Hà Nam</option>
                                                    <option data-region="1" value="15">TTBH Hà Nội: Tầng 2, số 111 Trần Đăng Ninh, Cầu Giấy, Hà Nội</option>
                                                    <option data-region="3" value="20">TTBH 1: 377 Hoàng Văn Thụ, P.2, Q.Tân Bình, HCM</option>
                                                    <option data-region="3" value="21">TTBH 2: 98 Võ Văn Ngân, Tp.Thủ Đức, HCM</option>
                                                    <option data-region="2" value="16">233 Lê Duẩn, TP Vinh, Nghệ An</option>
                                                    <option data-region="2" value="11">161 Hàm Nghi, Q.Thanh Khê, TP.Đà Nẵng:</option>
                                                </select>
                                            </div>
                                            <div class="form-row ship-note mb-12 flex">
<textarea type="text" class="form-control ship_note" name="ship_note_bacs" placeholder="Ghi chú về đơn hàng" cols="5" rows="1"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="action">
                                    <p class="note">Thông tin cá nhân của bạn sẽ được sử dụng để xử lý đơn đặt hàng của bạn, hỗ trợ trải nghiệm của bạn trên toàn bộ trang web và cho các mục đích khác được mô tả trong <a href="https://clickbuy.com.vn/" class="policy-link color-primary" target="_blank">chính sách riêng tư</a> của chúng tôi.</p>
                                    <button type="button" class="js-add-to-cart alt quickbuy" name="checkout" id="btnSubInstallmentForm">Tiến hành đặt hàng</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script>
        document.addEventListener("DOMContentLoaded", function (event) {

            // $(document).ready(function () {

            //     $('body').on('click', '.variant-select__title', function () {
            //         $(this).parents('.variant-select').addClass('active')
            //         $('.fixed').addClass('active')
            //     });

            //     $(document).mouseup(function (e) {
            //         var container = $(".variant-select__list");

            //         if (!container.is(e.target) && container.has(e.target).length === 0) {
            //             container.parents('.variant-select').removeClass('active');
            //             $('.fixed').removeCla6ss('active');
            //         }

            //     });


            // })

            // $(document).ready(function () {

            //     const main_url = "";
            //     const listVariant = [{ "id": 67894, "product_id": 197367, "attribute1_value": null, "attribute2_value": null, "attribute3_value": null, "attribute4_value": null, "difference_price": 0, "difference_price_old": 0, "created_at": "2024-04-30T22:09:00", "updated_at": "2024-04-30T22:09:00", "order": 0, "status": 1, "attribute_id_1": 3227, "attribute_id_2": 4854, "attribute_id_3": 0, "attribute_id_4": 0, "attribute_name_1": "Natural", "attribute_name_2": "BH chính hãng", "attribute_name_3": null, "attribute_name_4": null, "variant_name": "Natural ,BH chính hãng", "price": 0, "price_old": 0 }, { "id": 67900, "product_id": 197367, "attribute1_value": null, "attribute2_value": null, "attribute3_value": null, "attribute4_value": null, "difference_price": 0, "difference_price_old": 0, "created_at": "2024-04-30T22:09:00", "updated_at": "2024-04-30T22:09:00", "order": 0, "status": 1, "attribute_id_1": 3228, "attribute_id_2": 4854, "attribute_id_3": 0, "attribute_id_4": 0, "attribute_name_1": "Silver", "attribute_name_2": "BH chính hãng", "attribute_name_3": null, "attribute_name_4": null, "variant_name": "Silver ,BH chính hãng", "price": 300000, "price_old": 0 }, { "id": 67898, "product_id": 197367, "attribute1_value": null, "attribute2_value": null, "attribute3_value": null, "attribute4_value": null, "difference_price": 0, "difference_price_old": 0, "created_at": "2024-04-30T22:09:00", "updated_at": "2024-04-30T22:09:00", "order": 0, "status": 1, "attribute_id_1": 3226, "attribute_id_2": 4854, "attribute_id_3": 0, "attribute_id_4": 0, "attribute_name_1": "Black", "attribute_name_2": "BH chính hãng", "attribute_name_3": null, "attribute_name_4": null, "variant_name": "Black ,BH chính hãng", "price": 500000, "price_old": 0 }, { "id": 67896, "product_id": 197367, "attribute1_value": null, "attribute2_value": null, "attribute3_value": null, "attribute4_value": null, "difference_price": 0, "difference_price_old": 0, "created_at": "2024-04-30T22:09:00", "updated_at": "2024-04-30T22:09:00", "order": 0, "status": 1, "attribute_id_1": 3229, "attribute_id_2": 4854, "attribute_id_3": 0, "attribute_id_4": 0, "attribute_name_1": "Blue", "attribute_name_2": "BH chính hãng", "attribute_name_3": null, "attribute_name_4": null, "variant_name": "Blue ,BH chính hãng", "price": 500000, "price_old": 0 }, { "id": 67895, "product_id": 197367, "attribute1_value": null, "attribute2_value": null, "attribute3_value": null, "attribute4_value": null, "difference_price": 0, "difference_price_old": 0, "created_at": "2024-04-30T22:09:00", "updated_at": "2024-04-30T22:09:00", "order": 0, "status": 1, "attribute_id_1": 3227, "attribute_id_2": 4856, "attribute_id_3": 0, "attribute_id_4": 0, "attribute_name_1": "Natural", "attribute_name_2": "Gia Hạn 24 tháng", "attribute_name_3": null, "attribute_name_4": null, "variant_name": "Natural ,Gia Hạn 24 tháng", "price": 1100000, "price_old": 0 }, { "id": 67901, "product_id": 197367, "attribute1_value": null, "attribute2_value": null, "attribute3_value": null, "attribute4_value": null, "difference_price": 0, "difference_price_old": 0, "created_at": "2024-04-30T22:09:00", "updated_at": "2024-04-30T22:09:00", "order": 0, "status": 1, "attribute_id_1": 3228, "attribute_id_2": 4856, "attribute_id_3": 0, "attribute_id_4": 0, "attribute_name_1": "Silver", "attribute_name_2": "Gia Hạn 24 tháng", "attribute_name_3": null, "attribute_name_4": null, "variant_name": "Silver ,Gia Hạn 24 tháng", "price": 1400000, "price_old": 0 }, { "id": 67899, "product_id": 197367, "attribute1_value": null, "attribute2_value": null, "attribute3_value": null, "attribute4_value": null, "difference_price": 0, "difference_price_old": 0, "created_at": "2024-04-30T22:09:00", "updated_at": "2024-04-30T22:09:00", "order": 0, "status": 1, "attribute_id_1": 3226, "attribute_id_2": 4856, "attribute_id_3": 0, "attribute_id_4": 0, "attribute_name_1": "Black", "attribute_name_2": "Gia Hạn 24 tháng", "attribute_name_3": null, "attribute_name_4": null, "variant_name": "Black ,Gia Hạn 24 tháng", "price": 1600000, "price_old": 0 }, { "id": 67897, "product_id": 197367, "attribute1_value": null, "attribute2_value": null, "attribute3_value": null, "attribute4_value": null, "difference_price": 0, "difference_price_old": 0, "created_at": "2024-04-30T22:09:00", "updated_at": "2024-04-30T22:09:00", "order": 0, "status": 1, "attribute_id_1": 3229, "attribute_id_2": 4856, "attribute_id_3": 0, "attribute_id_4": 0, "attribute_name_1": "Blue", "attribute_name_2": "Gia Hạn 24 tháng", "attribute_name_3": null, "attribute_name_4": null, "variant_name": "Blue ,Gia Hạn 24 tháng", "price": 1600000, "price_old": 0 }];
            //     const price = parseInt(35690000);
            //     const price_old = parseInt(45990000);
            //     const price_locations = { '3227': 0, '3229': 0, '3226': 0, '3228': 0 };

            //     function getInforVariant() {

            //         let attr1_id = $(".list-variant.key_1").find("p.active").data('id');
            //         let attr1 = $(".list-variant.key_1").find("p.active").data('name');
            //         let image = $(".list-variant.key_1").find("p.active").data('image');
            //         let attr2 = $(".list-variant.key_2").find("p.active").data('name');
            //         let attr3 = $(".list-variant.key_3").find("p.active").data('name');
            //         let attr4 = $(".list-variant.key_4").find("p.active").data('name');

            //         listFilter = listVariant;

            //         if (attr1) {
            //             listFilter = listFilter.filter(item => item.attribute_name_1 == attr1);
            //             $('.cart-area__content input[name="attribute_id"]').val(attr1_id);
            //         }

            //         if (attr2) {
            //             listFilter = listFilter.filter(item => item.attribute_name_2 == attr2);
            //         }
            //         if (attr3) {
            //             listFilter = listFilter.filter(item => item.attribute_name_3 == attr3);
            //         }
            //         if (attr4) {
            //             listFilter = listFilter.filter(item => item.attribute_name_4 == attr4);
            //         }
            //         if (listFilter[0].price_old) {
            //             $(".product-price .price-old").text((parseInt(price_old)).toLocaleString() + ' đ');
            //         }
            //         if (listFilter.length > 0) {

            //             var totalPrice = parseInt(price) + parseInt(listFilter[0].price) + (price_locations[listFilter[0].attribute_id_1] || 0);
            //             var formattedPrice = totalPrice.toLocaleString() + ' đ';
            //             var result = (totalPrice === 0) ? "Liên hệ" : formattedPrice;

            //             $(".product-price .price").text(result);

            //             if (image != '') {
            //                 listFilter[0].image = image;
            //             }

            //             $('.cart-area__content input[name="variant_id"]').val(parseInt(listFilter[0].id));
            //             $('.cart-area__content input[name="product_price"]').val(parseInt(price + listFilter[0].price) + (price_locations[listFilter[0].attribute_id_1] || 0));
            //             $('.cart-area__content input[name="variant_name"]').val(listFilter[0].variant_name);

            //             $('.product-name-variant').html(listFilter[0].variant_name);

            //         }
            //         $(".list-variant p.active").find("input[type='radio']").prop('checked', true);
            //     }
            //     function displayAttr2() {
            //         if (!$('.list-variant.key_2 p').length) return
            //         $("body .list-variant.key_2 p").removeClass("active").parent().removeClass("active");
            //         $("body .list-variant.key_2 p").parent().css("display", "none").removeClass('check');
            //         let text_attr1 = $(".list-variant.key_1").find("p.active").data('name');
            //         let listFilter = listVariant;

            //         if (text_attr1) {
            //             listFilter = listFilter.filter(item => item.attribute_name_1 == text_attr1);
            //         }
            //         if (listFilter.length > 0) {
            //             listFilter.forEach(function (element) {
            //                 if (element.status == 1) {
            //                     $('.list-variant.key_2 p').each(function () {
            //                         let v = $(this).data('name');
            //                         if (v == element.attribute_name_2) {
            //                             $(this).parent().css("display", "inline-block").addClass('check');
            //                         }
            //                     });
            //                 }
            //             });
            //             if (listFilter[0].attribute_name_2) {
            //                 $(".list-variant.key_2 div.check:first").addClass('active').find('p').addClass('active');
            //             }
            //             $('.cart-area__content input[name="variant_id"]').val(parseInt(listFilter[0].id));
            //         }
            //     }
            //     function displayAttr3() {

            //         if (!$('.list-variant.key_3 p').length) return
            //         $('.list-variant.key_3 p').removeClass('active').parent().removeClass("active");
            //         $(".list-variant.key_3 p").parent().css("display", "none").removeClass('check');
            //         let text_attr1 = $(".list-variant.key_1").find("p.active").data('name')
            //         let text_attr2 = $(".list-variant.key_2").find("p.active").data('name')
            //         let listFilter = listVariant;
            //         if (text_attr2) {
            //             listFilter = listFilter.filter(item => item.attribute_name_2 == text_attr2);
            //         }
            //         if (text_attr1) {
            //             listFilter = listFilter.filter(item => item.attribute_name_1 == text_attr1);
            //         }
            //         if (listFilter.length > 0) {
            //             listFilter.forEach(function (element) {
            //                 if (element.status == 1) {
            //                     $('.list-variant.key_3 p').each(function () {
            //                         let v = $(this).data('name')
            //                         if (v == element.attribute_name_3) {
            //                             $(this).parent().css("display", "inline-block").addClass('check');
            //                         }
            //                     });
            //                 }
            //             });
            //             if (listFilter[0].attribute_name_3) {
            //                 $(".list-variant.key_3 div.check:first").addClass('active').find('p').addClass('active');
            //             }
            //             $('.cart-area__content input[name="variant_id"]').val(parseInt(listFilter[0].id));
            //         }
            //     }
            //     function displayAttr4() {
            //         if (!$('.list-variant.key_4 p').length) return
            //         $('.list-variant.key_4 p').removeClass('active').parent().removeClass("active");
            //         $(".list-variant.key_4 p").parent().css("display", "none").removeClass('check');
            //         let text_attr1 = $(".list-variant.key_1").find("p.active").data('name')
            //         let text_attr2 = $(".list-variant.key_2").find("p.active").data('name')
            //         let text_attr3 = $(".list-variant.key_3").find("p.active").data('name')
            //         let listFilter = listVariant;
            //         if (text_attr2) {
            //             listFilter = listFilter.filter(item => item.attribute_name_2 == text_attr2);
            //         }
            //         if (text_attr3) {
            //             listFilter = listFilter.filter(item => item.attribute_name_3 == text_attr3);
            //         }
            //         if (text_attr1) {
            //             listFilter = listFilter.filter(item => item.attribute_name_1 == text_attr1);
            //         }
            //         if (listFilter.length > 0) {
            //             listFilter.forEach(function (element) {
            //                 if (element.status == 1) {
            //                     $('.list-variant.key_4 p').each(function () {
            //                         let v = $(this).data('name')
            //                         if (v == element.attribute_name_4) {
            //                             $(this).parent().css("display", "inline-block").addClass('check');
            //                         }
            //                     });
            //                 }
            //             });
            //             if (listFilter[0].attribute_name_3) {
            //                 $(".list-variant.key_4 div.check:first").addClass('active').find('p').addClass('active');
            //             }
            //             $('.cart-area__content input[name="variant_id"]').val(parseInt(listFilter[0].id));
            //         }
            //     }


            //     if (Object.keys(listVariant).length) {
            //         $('.list-variant.key_1 .list-variant__item:first').addClass('active').find('p').addClass('active');
            //         displayAttr2();
            //         displayAttr3();
            //         displayAttr4();
            //         getInforVariant();
            //     }

            //     $('.list-variant.key_1 p').on('click', function (e) {

            //         $('.list-variant.key_1 p').removeClass('active').parent().removeClass("active");
            //         $(this).addClass('active').parent().addClass("active");

            //         getInforVariant();

            //         let image = $(".list-variant.key_1").find("p.active").data('image')

            //         $('.product-slide img').attr("src", main_url + image);

            //     });

            //     $('.list-variant.key_2 p').on('click', function (e) {
            //         $('.list-variant.key_2 p').removeClass('active').parent().removeClass("active");
            //         $(this).addClass('active').parent().addClass("active");
            //         getInforVariant();
            //     });

            //     $('.list-variant.key_3 p').on('click', function (e) {
            //         $('.list-variant.key_3 p').removeClass('active').parent().removeClass("active");
            //         $(this).addClass('active').parent().addClass("active");
            //         getInforVariant();
            //     });
            //     $('.list-variant.key_4 p').on('click', function (e) {
            //         $('.list-variant.key_4 p').removeClass('active').parent().removeClass("active");
            //         $(this).addClass('active').parent().addClass("active");
            //         getInforVariant();
            //     });


            //     let attribute1 = 3227;
            //     $('.list-variant.key_1 p').removeClass('active').parent().removeClass("active");
            //     $('.list-variant.key_1 p[data-id="' + attribute1 + '"]').addClass('active').parent().addClass("active");

            //     let attribute2 = 4854;
            //     $('.list-variant.key_2 p').removeClass('active').parent().removeClass("active");
            //     $('.list-variant.key_2 p[data-id="' + attribute2 + '"]').addClass('active').parent().addClass("active");


            //     getInforVariant();




            // });

        });


    </script>
    <script src="/assets/js/quick-order.js?v=3"></script>
    <section id="loading_box">
        <div id="loading_image"></div>
    </section>
    <div id="toast-container" class="toast-top-right">
        <div class="toast" aria-live="assertive">
            <div class="toast-message">
                <p></p>
            </div>
        </div>
    </div>
    <script>(function () { if (!document.body) return; var js = "window['__CF$cv$params']={r:'88e56f470b240997',t:'MTcxNzQ3ODAxNy4yMDAwMDA='};_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js',document.getElementsByTagName('head')[0].appendChild(_cpo);"; var _0xh = document.createElement('iframe'); _0xh.height = 1; _0xh.width = 1; _0xh.style.position = 'absolute'; _0xh.style.top = 0; _0xh.style.left = 0; _0xh.style.border = 'none'; _0xh.style.visibility = 'hidden'; document.body.appendChild(_0xh); function handler() { var _0xi = _0xh.contentDocument || _0xh.contentWindow.document; if (_0xi) { var _0xj = _0xi.createElement('script'); _0xj.innerHTML = js; _0xi.getElementsByTagName('head')[0].appendChild(_0xj); } } if (document.readyState !== 'loading') { handler(); } else if (window.addEventListener) { document.addEventListener('DOMContentLoaded', handler); } else { var prev = document.onreadystatechange || function () { }; document.onreadystatechange = function (e) { prev(e); if (document.readyState !== 'loading') { document.onreadystatechange = prev; handler(); } }; } })();</script>
</body>
</div>
    <script src="https://clickbuy.com.vn/scripts/main?v=EM4kJNElik1NdLEWzi9GBI__t7RFb5_OWHZBzg_D9Mw1"></script>
    <div class="header-overlay"></div>
    <script src="https://clickbuy.com.vn/assets/js/fancybox/fancybox.umd.js"></script>
    <script>
        $(document).ready(function () {
            $('#load-footer').load("/blocks/footer.aspx", function () {
                $("#region-menu li").click((function () {
                    const t = $(this).data("tab");
                    $(".tab-pane").removeClass("active"),
                        $(t).addClass("active"),
                        $("#region-menu li").removeClass("active"),
                        $(this).addClass("active")
                }))
            });
        });
        var formatter = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' });
        var priceTags = document.querySelectorAll('.js-format-price');
        priceTags.forEach(tag => {
            var price = tag.getAttribute('data-price');
            var formattedPrice = formatter.format(price);
            tag.textContent = formattedPrice;
        });

    </script>
    <script>
        $(document).ready(function () {
            //Lấy tỉnh thành
            var address = @Html.Raw(Json.Serialize(ViewBag.AddressParts));
            var city = address[2].trim();
            var district = address[1].trim();
            var commune = address[0].trim();
            console.log(address);
            function loadDistricts(idtinh, selectedDistrict) {
                $.getJSON('https://esgoo.net/api-tinhthanh/2/' + idtinh + '.htm', function (data_quan) {
                    if (data_quan.error == 0) {
                        $("#province_id").html('<option value="0">Quận Huyện</option>');
                        $("#commune_id").html('<option value="0">Phường Xã</option>');
                        $.each(data_quan.data, function (key_quan, val_quan) {
                            $("#province_id").append('<option value="' + val_quan.id + '">' + val_quan.full_name + '</option>');
                            if (selectedDistrict && val_quan.full_name.trim() === selectedDistrict.trim()) {
                                $("#province_id").val(val_quan.id);

                                $("#huyen").val(val_quan.full_name.trim());
                                loadCommunes(val_quan.id, commune);
                            }
                        });
                    }
                });
            }

            function loadCommunes(idquan, selectedCommune) {
                $.getJSON('https://esgoo.net/api-tinhthanh/3/' + idquan + '.htm', function (data_phuong) {
                    if (data_phuong.error == 0) {
                        $("#commune_id").html('<option value="0">Phường Xã</option>');
                        $.each(data_phuong.data, function (key_phuong, val_phuong) {
                            $("#commune_id").append('<option value="' + val_phuong.id + '">' + val_phuong.full_name + '</option>');
                            if (selectedCommune && val_phuong.full_name.trim() === selectedCommune.trim()) {
                                $("#commune_id").val(val_phuong.id);

                                $("#xa").val(val_phuong.full_name.trim());
                            }
                        });
                    }
                });
            }

            $.getJSON('https://esgoo.net/api-tinhthanh/1/0.htm', function (data_tinh) {
                console.log(data_tinh);
                if (data_tinh.error == 0) {
                    $("#city_id").html('<option value="">Chọn tỉnh/thành phố</option>');
                    $.each(data_tinh.data, function (key_tinh, val_tinh) {
                        $("#city_id").append('<option value="' + val_tinh.id + '">' + val_tinh.full_name + '</option>');
                        if (val_tinh.full_name.trim() === city) {
                            $("#city_id").val(val_tinh.id);

                            $("#tinh").val(val_tinh.full_name.trim());
                            loadDistricts(val_tinh.id, district);
                        }
                    });
                }
            });

            $("#city_id").change(function (e) {
                var idtinh = $(this).val();
                var selectedText = $("#city_id option:selected").text();
                $("#tinh").val(selectedText);
                $('#huyen').val('');
                $('#xa').val('');
                if (idtinh) {
                    loadDistricts(idtinh, null);
                }
            });

            $("#province_id").change(function (e) {
                var idquan = $(this).val();
                var selectedText = $("#province_id option:selected").text();
                $("#huyen").val(selectedText);
                if (idquan) {
                    loadCommunes(idquan, null);
                }
            });

            $("#commune_id").change(function (e) {
                var selectedText = $("#commune_id option:selected").text();
                $("#xa").val(selectedText);
            });


            console.log($('#QuickOrderForm'));
            $('#QuickOrderForm').validate({
                errorClass: 'error',
                rules: {
                    name: {
                        required: true,
                        minlength: 10
                    },
                    phone: {
                        required: true,
                        minlength: 10,
                        Number: true
                    },
                    email: {
                        required: true,
                        email: true
                    }
                },
                messages: {
                    name: {
                        required: "Bạn phải nhập tên !",
                        minlength: "Tên phải lớn hơn 10 kí tự !"
                    },
                    phone: {
                        required: "Bạn phải nhập số điện thoại !",
                        minlength: "Số điện thoại không đúng !",
                        Number: "Số điện thoại không đúng định dạng !"
                    },
                    email: {
                        required: "Bạn phải nhập email !",
                        email: "Email không đúng định dạng !"
                    }
                }
            });
            function AddCart(id) {
                        console.log(id);
                $.ajax({
                    url: '/add-item',
                    data: {
                        id : id
                    },
                    type : 'POST',
                    dataType : 'json',
                    success: function (response) {
                        if (response.status == 1) {
                            Toastify({
                                text: "Đã Thêm vào giỏ hàng",
                                backgroundColor: "#ff6f61",
                                duration: 3000
                            }).showToast();
                        }
                        else if (response.status == 2) {
                            Toastify({
                                text: "Chỉ được thêm tối đa sản phẩm",
                                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
                                duration: 3000
                            }).showToast();
                        }
                        else {
                            Toastify({
                                text: "Sản phẩm hiện đã hết hàng",
                                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
                                duration: 3000
                            }).showToast();
                        }
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            }
            function BuynowAjax() {
                var ReceiveTypeID = $('input[name="ReceiveTypeID"]:checked').val();
                var storageId = $('#inp-storageId').val();
                var tinh = $('#tinh').val();
                var huyen = $('#huyen').val();
                var xa = $('#xa').val();
                var userInput = {  
                    ReceiveTypeID: ReceiveTypeID,
                    storageId: storageId,
                    tinh: tinh,
                    huyen: huyen,
                    xa: xa
                }
                $.ajax({
                    url: '/buy-now',
                    data: {
                        strUser: JSON.stringify(userInput)
                    },
                    type: 'POST',
                    dataType: 'json',
                    success: function (response) {
                        if (response.url && response.url !== "") {
                            window.location.href = response.url;
                        }
                        if ($('#ReceiveTypeID1').is(':checked')) {
                            Swal.fire({
                                title: "Thành công!",
                                text: "Bạn đã đặt hàng thành công!",
                                icon: "success"
                            });

                        }
                        Fancybox.close();
                    }
                });
            }
            $(document).on('click', '#btnSubInstallmentForm', function () {
                Swal.fire({
                    title: "Bạn có chắc chắn đặt ?",
                    text: "Bạn sẽ không thể hoàn tác khi xác nhận!",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonText: 'Đồng ý',
                    cancelButtonText: 'Hủy'
                }).then((result) => {
                    if (result.isConfirmed) {
                        BuynowAjax();
                    }
                });
            });
            $('.add-to-cart').eq(1).click(function () {
                var id = $(this).data('id');
                
                AddCart(id);
            });
            $('.buy-now').click(function () {
                console.log('buy-now');
            })
            $(document).on('click', '.list-variant__item', function () {
                $('.list-variant__item').removeClass('active');
                $(this).addClass('active');
                var id = $(this).data('id');
                $('#inp-storageId').val(id);
            });

            var activeDiv = $('.list-variant__item.active');
            var dataId = activeDiv.data('id');
            $('#inp-storageId').val(dataId);
            if(@user.Id === null){
               console.log("dont have user")
            }else{
                console.log("have user")
            }
        });
    </script>
</body>

</html>
<script>
    Fancybox.bind("[data-fancybox]");

</script>
<script>
    sessionStorage.setItem('previousPageProfile', window.location.href);
</script>
@section scripts{
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootbox@6.0.0/dist/bootbox.min.js"></script>
}